{"version":3,"sources":["webpack:///./src/js/modules/cart/cart.js"],"names":["Module","this","dom","$el","el","$btnGenerate","querySelector","$btnAtc","$modalSuccess","document","getElementById","$ModalError","$budgeCartIndicator","$editor","$codeImage","$largeImage","endpoint","dataset","codeEndpoint","classes","disabled","modalSuccess","modalError","flask","language","init","addEventListener","handleAddToCart","bind","handleGenerate","Modal","languaje","codeflaskMin","lineNumbers","defaultTheme","$codeInput","setAttribute","updateCode","e","preventDefault","classList","add","axios","method","url","data","productId","then","response","success","items","show","updateCartIndicator","catch","error","finally","remove","code","getCode","params","backgroundColor","encodeURI","theme","dropShadow","paddingHorizontal","paddingVertical","widthAdjustment","fontSize","responseType","image","innerHTML","$imageHtml","createElement","blob","Blob","type","headers","imageUrl","URL","createObjectURL","appendChild","scrollIntoView","behavior","textContent","Component"],"mappings":"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","file":"3.bundle.js","sourcesContent":["import { Component } from '@verndale/core';\nimport { Modal } from 'bootstrap';\nimport axios from 'axios';\nimport codeflaskMin from 'codeflask';\n\nclass Module extends Component {\n  setupDefaults() {\n    this.dom = {\n      $el: this.el,\n      $btnGenerate: this.el.querySelector('.cart-module__btn-generate'),\n      $btnAtc: this.el.querySelector('.cart-module__atc'),\n      $modalSuccess: document.getElementById('modalSuccess'),\n      $ModalError: document.getElementById('modalError'),\n      $budgeCartIndicator: document.getElementById('badge-cart-indicator'),\n      $editor: this.el.querySelector('#cart-module__editor'),\n      $codeImage: this.el.querySelector('.cart-module__code'),\n      $largeImage: this.el.querySelector('.cart-module__large-image')\n    };\n\n    this.endpoint = this.dom.$el.dataset.endpoint || null;\n    this.codeEndpoint = this.dom.$el.dataset.codeEndpoint || null;\n\n    this.classes = {\n      disabled: 'disabled'\n    };\n\n    this.modalSuccess = null;\n    this.modalError = null;\n    this.flask = null;\n    this.language = null;\n\n    this.init();\n  } //setupDefaults\n\n  addListeners() {\n    const { $btnAtc, $btnGenerate } = this.dom;\n\n    $btnAtc?.addEventListener('click', this.handleAddToCart.bind(this));\n    $btnGenerate?.addEventListener('click', this.handleGenerate.bind(this));\n  } //addListeners\n\n  init() {\n    const { $modalSuccess, $ModalError, $editor } = this.dom;\n\n    if ($modalSuccess) this.modalSuccess = new Modal($modalSuccess);\n    if ($ModalError) this.modalError = new Modal($ModalError);\n\n    if ($editor) {\n      this.language = $editor.dataset.languaje || 'js';\n\n      this.flask = new codeflaskMin($editor, {\n        language: this.language,\n        lineNumbers: true,\n        defaultTheme: true\n      });\n\n      const $codeInput = $editor.querySelector('.codeflask__textarea');\n      if (!$codeInput) return;\n      $codeInput.setAttribute('maxlength', '280');\n      this.flask.updateCode(`console.log(\"b\" + \"a\" + +\"a\" + \"a\");\n// 'baNaNa'`);\n    }\n  } //init\n\n  handleAddToCart(e) {\n    e.preventDefault();\n\n    const { $btnAtc } = this.dom;\n    $btnAtc.classList.add(this.classes.disabled);\n\n    const data = { productId: 'sample' };\n\n    axios({\n      method: 'post',\n      url: this.endpoint,\n      data\n    })\n      .then(response => {\n        const { success, items } = response?.data || {};\n        if (success) {\n          if (this.modalSuccess) this.modalSuccess.show();\n          this.updateCartIndicator(items);\n        } else {\n          if (this.modalError) this.modalError.show();\n        }\n      })\n      .catch(error => {\n        if (this.modalError) this.modalError.show();\n      })\n      .finally(() => {\n        $btnAtc.classList.remove(this.classes.disabled);\n      });\n  } //handleAddToCart\n\n  handleGenerate(e) {\n    e.preventDefault();\n    if (!this.flask) return;\n\n    const code = this.flask.getCode();\n    if (!code) return;\n\n    const { $btnGenerate, $codeImage, $largeImage } = this.dom;\n\n    $btnGenerate.classList.add(this.classes.disabled);\n\n    axios({\n      method: 'get',\n      url: this.codeEndpoint,\n      params: {\n        backgroundColor: 'rgba(255, 255, 255, 1)',\n        code: encodeURI(code),\n        theme: 'dracula',\n        dropShadow: false,\n        paddingHorizontal: '0px',\n        paddingVertical: '0px',\n        widthAdjustment: false,\n        lineNumbers: true,\n        fontSize: '20px'\n      },\n      responseType: 'arraybuffer'\n    })\n      .then(response => {\n        const image = response.data || null;\n\n        if (image) {\n          $codeImage.innerHTML = '';\n          const $imageHtml = document.createElement('img');\n\n          const blob = new Blob([image], {\n            type: response.headers['content-type']\n          });\n          const imageUrl = URL.createObjectURL(blob);\n          $imageHtml.setAttribute('src', imageUrl);\n          $codeImage.appendChild($imageHtml);\n        } else {\n          if (this.modalError) this.modalError.show();\n        }\n      })\n      .catch(error => {\n        if (this.modalError) this.modalError.show();\n      })\n      .finally(() => {\n        $btnGenerate.classList.remove(this.classes.disabled);\n        $largeImage.scrollIntoView({ behavior: 'smooth' });\n      });\n  } //handleGenerate\n\n  updateCartIndicator(items) {\n    const { $budgeCartIndicator } = this.dom;\n    if ($budgeCartIndicator) $budgeCartIndicator.textContent = items || 0;\n  } //updateCartIndicator\n}\n\nexport default Module;\n"],"sourceRoot":""}