{"version":3,"sources":["webpack:///./src/js/modules/cart/cart.js"],"names":["Module","this","dom","$el","el","$btnAtc","querySelector","$modalSuccess","document","getElementById","$ModalError","$budgeCartIndicator","endpoint","dataset","classes","disabled","modalSuccess","modalError","init","addEventListener","handleAddToCart","bind","Modal","e","preventDefault","classList","add","axios","method","url","data","productId","then","response","success","items","show","updateCartIndicator","catch","error","finally","remove","textContent","Component"],"mappings":"+jDAIMA,E,yZACJ,WACEC,KAAKC,IAAM,CACTC,IAAKF,KAAKG,GACVC,QAASJ,KAAKG,GAAGE,cAAc,qBAC/BC,cAAeC,SAASC,eAAe,gBACvCC,YAAaF,SAASC,eAAe,cACrCE,oBAAqBH,SAASC,eAAe,yBAG/CR,KAAKW,SAAWX,KAAKC,IAAIC,IAAIU,QAAQD,UAAY,KAEjDX,KAAKa,QAAU,CACbC,SAAU,YAGZd,KAAKe,aAAe,KACpBf,KAAKgB,WAAa,KAElBhB,KAAKiB,S,0BAGP,WACE,IAAQb,EAAYJ,KAAKC,IAAjBG,QAERA,WAASc,iBAAiB,QAASlB,KAAKmB,gBAAgBC,KAAKpB,S,kBAG/D,WACE,MAAuCA,KAAKC,IAApCK,EAAR,EAAQA,cAAeG,EAAvB,EAAuBA,YAEnBH,IAAeN,KAAKe,aAAe,IAAIM,IAAMf,IAC7CG,IAAaT,KAAKgB,WAAa,IAAIK,IAAMZ,M,6BAG/C,SAAgBa,GAAG,WACjBA,EAAEC,iBAEF,IAAQnB,EAAYJ,KAAKC,IAAjBG,QACRA,EAAQoB,UAAUC,IAAIzB,KAAKa,QAAQC,UAInCY,IAAM,CACJC,OAAQ,OACRC,IAAK5B,KAAKW,SACVkB,KALW,CAAEC,UAAW,YAOvBC,MAAK,SAAAC,GACJ,OAA2BA,aAAA,EAAAA,EAAUH,OAAQ,GAArCI,EAAR,EAAQA,QAASC,EAAjB,EAAiBA,MACbD,GACE,EAAKlB,cAAc,EAAKA,aAAaoB,OACzC,EAAKC,oBAAoBF,IAErB,EAAKlB,YAAY,EAAKA,WAAWmB,UAGxCE,OAAM,SAAAC,GACD,EAAKtB,YAAY,EAAKA,WAAWmB,UAEtCI,SAAQ,WACPnC,EAAQoB,UAAUgB,OAAO,EAAK3B,QAAQC,e,iCAI5C,SAAoBoB,GAClB,IAAQxB,EAAwBV,KAAKC,IAA7BS,oBACJA,IAAqBA,EAAoB+B,YAAcP,GAAS,Q,iFAnEnDQ,aAuEN3C","file":"3.bundle.js","sourcesContent":["import { Component } from '@verndale/core';\nimport { Modal } from 'bootstrap';\nimport axios from 'axios';\n\nclass Module extends Component {\n  setupDefaults() {\n    this.dom = {\n      $el: this.el,\n      $btnAtc: this.el.querySelector('.cart-module__atc'),\n      $modalSuccess: document.getElementById('modalSuccess'),\n      $ModalError: document.getElementById('modalError'),\n      $budgeCartIndicator: document.getElementById('badge-cart-indicator')\n    };\n\n    this.endpoint = this.dom.$el.dataset.endpoint || null;\n\n    this.classes = {\n      disabled: 'disabled'\n    };\n\n    this.modalSuccess = null;\n    this.modalError = null;\n\n    this.init();\n  } //setupDefaults\n\n  addListeners() {\n    const { $btnAtc } = this.dom;\n\n    $btnAtc?.addEventListener('click', this.handleAddToCart.bind(this));\n  } //addListeners\n\n  init() {\n    const { $modalSuccess, $ModalError } = this.dom;\n\n    if ($modalSuccess) this.modalSuccess = new Modal($modalSuccess);\n    if ($ModalError) this.modalError = new Modal($ModalError);\n  } //init\n\n  handleAddToCart(e) {\n    e.preventDefault();\n\n    const { $btnAtc } = this.dom;\n    $btnAtc.classList.add(this.classes.disabled);\n\n    const data = { productId: 'sample' };\n\n    axios({\n      method: 'post',\n      url: this.endpoint,\n      data\n    })\n      .then(response => {\n        const { success, items } = response?.data || {};\n        if (success) {\n          if (this.modalSuccess) this.modalSuccess.show();\n          this.updateCartIndicator(items);\n        } else {\n          if (this.modalError) this.modalError.show();\n        }\n      })\n      .catch(error => {\n        if (this.modalError) this.modalError.show();\n      })\n      .finally(() => {\n        $btnAtc.classList.remove(this.classes.disabled);\n      });\n  } //handleAddToCart\n\n  updateCartIndicator(items) {\n    const { $budgeCartIndicator } = this.dom;\n    if ($budgeCartIndicator) $budgeCartIndicator.textContent = items || 0;\n  } //updateCartIndicator\n}\n\nexport default Module;\n"],"sourceRoot":""}